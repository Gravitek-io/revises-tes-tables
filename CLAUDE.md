# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Application Overview

This is a French-language educational web application designed to help children practice multiplication tables in an engaging way. The app is built with Next.js 14 and uses local storage for persistence, requiring no authentication or backend services.

## Development Commands

```bash
# Start development server
npm run dev

# Build for production (generates static export)
npm run build

# Lint code
npm run lint
```

The application is configured to build as a static export, making it deployable to GitHub Pages or other static hosting services.

## Architecture

### Core Data Flow
The application follows a client-side only architecture with local storage persistence:

1. **Settings Management**: `GameStorage` class handles all localStorage operations
2. **Game Logic**: `GameEngine` class contains question generation and scoring algorithms  
3. **Session Flow**: Configuration → Game → Results → Statistics

### Key Components

- **GameStorage** (`src/lib/storage.ts`): Centralized localStorage management with error handling and SSR safety
- **GameEngine** (`src/lib/game.ts`): Pure functions for question generation, scoring, and encouragement messages
- **Type System** (`src/types/index.ts`): Complete TypeScript interfaces for game state

### Page Structure

- `/` - Home page with session overview and quick stats
- `/config` - Game configuration (questions count, table selection)
- `/game` - Interactive gameplay with real-time feedback
- `/results` - Post-session analysis and encouragement (uses Suspense for useSearchParams)
- `/stats` - Historical performance tracking

## Critical Implementation Details

### Static Export Compatibility
The `/results` page uses `useSearchParams()` wrapped in Suspense to support Next.js static export:
```tsx
<Suspense fallback={<LoadingSpinner />}>
  <ResultsContent />
</Suspense>
```

### localStorage Safety
All localStorage operations include SSR safety checks:
```typescript
if (typeof window === 'undefined') return DEFAULT_VALUE
```

### Question Generation Algorithm
Questions are generated by randomly selecting from configured tables (multiplicand) and multiplying by 1-10 (multiplier). Questions are then shuffled to prevent patterns.

### Encouragement System
Messages adapt based on performance percentage and identify weakest tables for targeted feedback. Four performance tiers: excellent (90%+), good (70%+), canDoBetter (50%+), keepTrying (<50%).

## Styling Approach

Uses Tailwind CSS with child-friendly design patterns:
- Gradient backgrounds and colorful UI elements
- Custom animations (bounce, wiggle, slide-up) defined in globals.css
- Responsive design optimized for both desktop and mobile
- Toast notifications for user feedback

## Data Persistence

All data stored in browser localStorage with 50-session limit:
- Game settings (tables, question count)
- Session history with detailed question tracking  
- Computed statistics (performance trends, table-specific analytics)

## Development Notes

- Application is entirely in French as per specifications
- No backend dependencies - purely client-side
- Optimized for static deployment (GitHub Pages compatible)
- Uses client components throughout due to localStorage requirements